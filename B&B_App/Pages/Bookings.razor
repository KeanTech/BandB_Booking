@page "/Bookings"
@implements IDisposable
@inject NewBookingsContainer NewBookingsContainer
@inject IContractService<Contract> contractService

<MudCard>
    <MudCardHeader>Pending bookings</MudCardHeader>
    <MudCardContent>
        @foreach (var booking in NewBookingsContainer.newBookings)
        {
            <MudText>Booking ID: @booking.Id</MudText>
        }
    </MudCardContent>
</MudCard>

<MudButton OnClick="OnSubmitBookings" Variant="Variant.Filled" Color="Color.Success">Book</MudButton>


@code {
    private List<Room> _rooms = new List<Room>();

    protected override void OnInitialized()
    {
        NewBookingsContainer.OnChange += StateHasChanged;
    }

    public async void OnSubmitBookings()
    {
        await contractService.Create(NewBookingsContainer.newBookings);
    }

    public void Dispose()
    {
        NewBookingsContainer.OnChange -= StateHasChanged;
    }
}
